{
  "_format": "hh-sol-artifact-1",
  "contractName": "EarnXVRFModule",
  "sourceName": "contracts/EarnXVRFModule.sol",
  "abi": [
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_vrfCoordinator",
          "type": "address"
        },
        {
          "internalType": "bytes32",
          "name": "_keyHash",
          "type": "bytes32"
        },
        {
          "internalType": "uint256",
          "name": "_vrfSubscriptionId",
          "type": "uint256"
        },
        {
          "internalType": "address",
          "name": "_riskCalculator",
          "type": "address"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "constructor"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "uint256",
          "name": "invoiceId",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "aprBasisPoints",
          "type": "uint256"
        }
      ],
      "name": "APRCalculated",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "uint256",
          "name": "invoiceId",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "randomness",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "finalAPR",
          "type": "uint256"
        }
      ],
      "name": "VRFFulfilled",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "uint256",
          "name": "invoiceId",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "requestId",
          "type": "uint256"
        }
      ],
      "name": "VRFRequested",
      "type": "event"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "riskScore",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "dueDate",
          "type": "uint256"
        }
      ],
      "name": "calculateAPREstimate",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "invoiceId",
          "type": "uint256"
        },
        {
          "internalType": "string",
          "name": "commodity",
          "type": "string"
        },
        {
          "internalType": "string",
          "name": "supplierCountry",
          "type": "string"
        },
        {
          "internalType": "string",
          "name": "buyerCountry",
          "type": "string"
        },
        {
          "internalType": "uint256",
          "name": "amount",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "dueDate",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "riskScore",
          "type": "uint256"
        }
      ],
      "name": "calculateFinalAPR",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "coreContract",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "requestId",
          "type": "uint256"
        },
        {
          "internalType": "uint256[]",
          "name": "randomWords",
          "type": "uint256[]"
        }
      ],
      "name": "fulfillRandomWords",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "invoiceId",
          "type": "uint256"
        }
      ],
      "name": "getCalculatedAPR",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "invoiceId",
          "type": "uint256"
        }
      ],
      "name": "getRandomness",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "getVRFConfig",
      "outputs": [
        {
          "internalType": "address",
          "name": "coordinator",
          "type": "address"
        },
        {
          "internalType": "bytes32",
          "name": "keyHash",
          "type": "bytes32"
        },
        {
          "internalType": "uint256",
          "name": "subscriptionId",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "invoiceId",
          "type": "uint256"
        }
      ],
      "name": "getVRFData",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "requestId",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "randomness",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "calculatedAPR",
          "type": "uint256"
        },
        {
          "internalType": "bool",
          "name": "fulfilled",
          "type": "bool"
        },
        {
          "internalType": "uint256",
          "name": "timestamp",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "i_keyHash",
      "outputs": [
        {
          "internalType": "bytes32",
          "name": "",
          "type": "bytes32"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "i_vrfCoordinator",
      "outputs": [
        {
          "internalType": "contract IVRFCoordinatorV2",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "i_vrfSubscriptionId",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "invoiceId",
          "type": "uint256"
        }
      ],
      "name": "isVRFFulfilled",
      "outputs": [
        {
          "internalType": "bool",
          "name": "",
          "type": "bool"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "invoiceId",
          "type": "uint256"
        }
      ],
      "name": "requestRandomAPR",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "riskCalculator",
      "outputs": [
        {
          "internalType": "contract EarnXRiskCalculator",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_coreContract",
          "type": "address"
        }
      ],
      "name": "setCoreContract",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "name": "vrfData",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "invoiceId",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "requestId",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "randomness",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "calculatedAPR",
          "type": "uint256"
        },
        {
          "internalType": "bool",
          "name": "fulfilled",
          "type": "bool"
        },
        {
          "internalType": "uint256",
          "name": "timestamp",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "name": "vrfRequestToInvoice",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    }
  ],
  "bytecode": "0x610100346100e657601f610eae38819003918201601f19168301916001600160401b038311848410176100eb578084926080946040528339810103126100e65761004881610101565b90602081015190610060606060408301519201610101565b6001600160a01b0393841660805260c09290925260e0521660a052604051610d989081610116823960805181818161025601528181610314015281816105f40152610849015260a0518181816104fd0152610ad2015260c0518181816103400152818161043401526107dd015260e0518181816103660152818161080b01526109770152f35b600080fd5b634e487b7160e01b600052604160045260246000fd5b51906001600160a01b03821682036100e65756fe6040608081526004908136101561001557600080fd5b600090813560e01c80625c3f2f146109c2578063113430d31461099a5780632a70ba2a146109605780633550dc671461079b57806338ba46141461056e578063453f4f621461052c5780634ebd3622146104e9578063566205a8146104ba5780637fadf97b1461045757806395ff69431461041d5780639851e4c2146103915780639a5ea6a0146102ff578063aaa063cd14610285578063aebc455014610242578063c6266693146101b0578063e80db5db146101895763e85ae3fc146100db57600080fd5b3461018557806003193601126101855782359260249384354281039081116101725762278d009004600a820291808304600a149015171561017257601481029080820460141490151715610172576101f491808301958684116101605750010180931161014c576020838351908152f35b60118491634e487b7160e01b600052526000fd5b634e487b7160e01b8152601185528790fd5b5050634e487b7160e01b83526011905250fd5b5080fd5b5034610185578160031936011261018557905490516001600160a01b039091168152602090f35b5082903461023e57602036600319011261023e576001600160a01b0382358181169391929084900361023a5784549283166101f75750506001600160a01b03191617815580f35b906020606492519162461bcd60e51b8352820152601960248201527f436f726520636f6e747261637420616c726561647920736574000000000000006044820152fd5b8480fd5b8280fd5b5034610185578160031936011261018557517f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03168152602090f35b50913461018557602036600319011261018557803590818352600260205260038484200154156102c75760208460038186868152600285522001549051908152f35b606490602085519162461bcd60e51b83528201526012602482015271105414881b9bdd0818d85b18dd5b185d195960721b6044820152fd5b503461018557816003193601126101855780517f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031681527f000000000000000000000000000000000000000000000000000000000000000060208201527f000000000000000000000000000000000000000000000000000000000000000091810191909152606090f35b50903461041a57602036600319011261041a57828260a094928593358152600260205220908351936103c285610b93565b825485526001830154948560208201526002840154908183820152600560ff60038701549586606085015287015416151595866080840152015495869101528151958652602086015284015260608301526080820152f35b80fd5b5034610185578160031936011261018557602090517f00000000000000000000000000000000000000000000000000000000000000008152f35b5082903461023e57602036600319011261023e578060c09383358152600260205220805492600182015492600283015490600560ff60038601549486015416940154948151968752602087015285015260608401521515608083015260a0820152f35b50823461023e57602036600319011261023e57808260209460ff93358152600286522001541690519015158152f35b5034610185578160031936011261018557517f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03168152602090f35b50823461023e57602036600319011261023e57816020938261055f60ff6002953592838552868952858520015416610c84565b81528285522001549051908152f35b5082903461023e578060031936011261023e57602480359267ffffffffffffffff8085116107975736602386011215610797578482013594818611610785578560051b958551916020916105c4838a0185610bc5565b8352818301868199830101913683116107815787849101915b83831061077157506001600160a01b0393925050507f000000000000000000000000000000000000000000000000000000000000000082163303610739578435895260018152868920549788156106fe57888a5260028252878a209351156106ec577f6298b470c1c778ecf2cd086854e1550f80755b3b5e1a60a8ceead5839ec6c160888b959493888c94519687600282015501600160ff1982541617905586825191878352820152a282541696873b1561023e57604490838851998a948593633bef50f560e21b855289850152898401525af180156106e2576106bf578580f35b84116106d15750505281808080808580f35b634e487b7160e01b85526041905283fd5b84513d88823e3d90fd5b634e487b7160e01b8a5260328652868afd5b875162461bcd60e51b815280870183905260168189015275125b9d985b1a5908159491881c995c5d595cdd08125160521b6044820152606490fd5b846014876064938a519362461bcd60e51b85528401528201527327b7363c902b29231021b7b7b93234b730ba37b960611b6044820152fd5b82358152918101918491016105dd565b8a80fd5b634e487b7160e01b8752604183528387fd5b8580fd5b5034610185576020928360031936011261023e57803590838560018060a01b036107c9818454163314610c43565b60a48651809881936305d3b1d360e41b83527f00000000000000000000000000000000000000000000000000000000000000008884015267ffffffffffffffff7f000000000000000000000000000000000000000000000000000000000000000016602484015260036044840152620186a06064840152600160848401527f0000000000000000000000000000000000000000000000000000000000000000165af1948515610954579086918196610922575b509081866005935260018252848682205585519361089985610b93565b8585528285018881528786018381526060870191848352896080890195808752600260a08b0198428a528c835252209751885551600188015551600287015551600386015584019051151560ff80198354169116179055519101557fc6f253de430148d7581a940518a73a6d98efc85ea9162887a3918443ba67c212848351858152a251908152f35b8281939297503d831161094d575b61093a8183610bc5565b8101031261023a5751938590600561087c565b503d610930565b508351903d90823e3d90fd5b5034610185578160031936011261018557602090517f00000000000000000000000000000000000000000000000000000000000000008152f35b50823461023e57602036600319011261023e5760209282913581526001845220549051908152f35b5082903461023e5760031960e036820112610b8f5782359067ffffffffffffffff90602435828111610b8b576109fb9036908701610be7565b94604435838111610b8757610a139036908301610be7565b92606435908111610b8757610a2b9036908301610be7565b87549093906001600160a01b0390610a469082163314610c43565b858952602097889360028552888b20968188015460ff16610a6690610c84565b6002880154908a51978896879586956304fb536b60e21b8752860160c0905260c48601610a9291610cc4565b82868203016024870152610aa591610cc4565b90848203016044850152610ab891610cc4565b90608435606484015260a435608484015260a483015203917f0000000000000000000000000000000000000000000000000000000000000000165afa958615610b7c578096610b47575b5050610b146003949560c43590610d04565b93849101557f3a9a863391eab7c1eb847a43b5427900544f378063d6f33d68f9d7cff9fce5f7848351858152a251908152f35b9095508486813d8311610b75575b610b5f8183610bc5565b8101031261041a5750935193610b146003610b02565b503d610b55565b8451903d90823e3d90fd5b8780fd5b8680fd5b8380fd5b60c0810190811067ffffffffffffffff821117610baf57604052565b634e487b7160e01b600052604160045260246000fd5b90601f8019910116810190811067ffffffffffffffff821117610baf57604052565b81601f82011215610c3e5780359067ffffffffffffffff8211610baf5760405192610c1c601f8401601f191660200185610bc5565b82845260208383010111610c3e57816000926020809301838601378301015290565b600080fd5b15610c4a57565b60405162461bcd60e51b815260206004820152601260248201527113db9b1e4818dbdc994818dbdb9d1c9858dd60721b6044820152606490fd5b15610c8b57565b60405162461bcd60e51b8152602060048201526011602482015270159491881b9bdd08199d5b199a5b1b1959607a1b6044820152606490fd5b919082519283825260005b848110610cf0575050826000602080949584010152601f8019910116010190565b602081830181015184830182015201610ccf565b9060148111610d11575090565b60288111610d3e575060648101809111610d285790565b634e487b7160e01b600052601160045260246000fd5b603c10610d535760fa8101809111610d285790565b6101f48101809111610d28579056fea2646970667358221220c01459f3227740ec7173cfb5ee14f900c0d5aaf1d19ad4f2a8cd04cde514541464736f6c63430008140033",
  "deployedBytecode": "0x6040608081526004908136101561001557600080fd5b600090813560e01c80625c3f2f146109c2578063113430d31461099a5780632a70ba2a146109605780633550dc671461079b57806338ba46141461056e578063453f4f621461052c5780634ebd3622146104e9578063566205a8146104ba5780637fadf97b1461045757806395ff69431461041d5780639851e4c2146103915780639a5ea6a0146102ff578063aaa063cd14610285578063aebc455014610242578063c6266693146101b0578063e80db5db146101895763e85ae3fc146100db57600080fd5b3461018557806003193601126101855782359260249384354281039081116101725762278d009004600a820291808304600a149015171561017257601481029080820460141490151715610172576101f491808301958684116101605750010180931161014c576020838351908152f35b60118491634e487b7160e01b600052526000fd5b634e487b7160e01b8152601185528790fd5b5050634e487b7160e01b83526011905250fd5b5080fd5b5034610185578160031936011261018557905490516001600160a01b039091168152602090f35b5082903461023e57602036600319011261023e576001600160a01b0382358181169391929084900361023a5784549283166101f75750506001600160a01b03191617815580f35b906020606492519162461bcd60e51b8352820152601960248201527f436f726520636f6e747261637420616c726561647920736574000000000000006044820152fd5b8480fd5b8280fd5b5034610185578160031936011261018557517f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03168152602090f35b50913461018557602036600319011261018557803590818352600260205260038484200154156102c75760208460038186868152600285522001549051908152f35b606490602085519162461bcd60e51b83528201526012602482015271105414881b9bdd0818d85b18dd5b185d195960721b6044820152fd5b503461018557816003193601126101855780517f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031681527f000000000000000000000000000000000000000000000000000000000000000060208201527f000000000000000000000000000000000000000000000000000000000000000091810191909152606090f35b50903461041a57602036600319011261041a57828260a094928593358152600260205220908351936103c285610b93565b825485526001830154948560208201526002840154908183820152600560ff60038701549586606085015287015416151595866080840152015495869101528151958652602086015284015260608301526080820152f35b80fd5b5034610185578160031936011261018557602090517f00000000000000000000000000000000000000000000000000000000000000008152f35b5082903461023e57602036600319011261023e578060c09383358152600260205220805492600182015492600283015490600560ff60038601549486015416940154948151968752602087015285015260608401521515608083015260a0820152f35b50823461023e57602036600319011261023e57808260209460ff93358152600286522001541690519015158152f35b5034610185578160031936011261018557517f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03168152602090f35b50823461023e57602036600319011261023e57816020938261055f60ff6002953592838552868952858520015416610c84565b81528285522001549051908152f35b5082903461023e578060031936011261023e57602480359267ffffffffffffffff8085116107975736602386011215610797578482013594818611610785578560051b958551916020916105c4838a0185610bc5565b8352818301868199830101913683116107815787849101915b83831061077157506001600160a01b0393925050507f000000000000000000000000000000000000000000000000000000000000000082163303610739578435895260018152868920549788156106fe57888a5260028252878a209351156106ec577f6298b470c1c778ecf2cd086854e1550f80755b3b5e1a60a8ceead5839ec6c160888b959493888c94519687600282015501600160ff1982541617905586825191878352820152a282541696873b1561023e57604490838851998a948593633bef50f560e21b855289850152898401525af180156106e2576106bf578580f35b84116106d15750505281808080808580f35b634e487b7160e01b85526041905283fd5b84513d88823e3d90fd5b634e487b7160e01b8a5260328652868afd5b875162461bcd60e51b815280870183905260168189015275125b9d985b1a5908159491881c995c5d595cdd08125160521b6044820152606490fd5b846014876064938a519362461bcd60e51b85528401528201527327b7363c902b29231021b7b7b93234b730ba37b960611b6044820152fd5b82358152918101918491016105dd565b8a80fd5b634e487b7160e01b8752604183528387fd5b8580fd5b5034610185576020928360031936011261023e57803590838560018060a01b036107c9818454163314610c43565b60a48651809881936305d3b1d360e41b83527f00000000000000000000000000000000000000000000000000000000000000008884015267ffffffffffffffff7f000000000000000000000000000000000000000000000000000000000000000016602484015260036044840152620186a06064840152600160848401527f0000000000000000000000000000000000000000000000000000000000000000165af1948515610954579086918196610922575b509081866005935260018252848682205585519361089985610b93565b8585528285018881528786018381526060870191848352896080890195808752600260a08b0198428a528c835252209751885551600188015551600287015551600386015584019051151560ff80198354169116179055519101557fc6f253de430148d7581a940518a73a6d98efc85ea9162887a3918443ba67c212848351858152a251908152f35b8281939297503d831161094d575b61093a8183610bc5565b8101031261023a5751938590600561087c565b503d610930565b508351903d90823e3d90fd5b5034610185578160031936011261018557602090517f00000000000000000000000000000000000000000000000000000000000000008152f35b50823461023e57602036600319011261023e5760209282913581526001845220549051908152f35b5082903461023e5760031960e036820112610b8f5782359067ffffffffffffffff90602435828111610b8b576109fb9036908701610be7565b94604435838111610b8757610a139036908301610be7565b92606435908111610b8757610a2b9036908301610be7565b87549093906001600160a01b0390610a469082163314610c43565b858952602097889360028552888b20968188015460ff16610a6690610c84565b6002880154908a51978896879586956304fb536b60e21b8752860160c0905260c48601610a9291610cc4565b82868203016024870152610aa591610cc4565b90848203016044850152610ab891610cc4565b90608435606484015260a435608484015260a483015203917f0000000000000000000000000000000000000000000000000000000000000000165afa958615610b7c578096610b47575b5050610b146003949560c43590610d04565b93849101557f3a9a863391eab7c1eb847a43b5427900544f378063d6f33d68f9d7cff9fce5f7848351858152a251908152f35b9095508486813d8311610b75575b610b5f8183610bc5565b8101031261041a5750935193610b146003610b02565b503d610b55565b8451903d90823e3d90fd5b8780fd5b8680fd5b8380fd5b60c0810190811067ffffffffffffffff821117610baf57604052565b634e487b7160e01b600052604160045260246000fd5b90601f8019910116810190811067ffffffffffffffff821117610baf57604052565b81601f82011215610c3e5780359067ffffffffffffffff8211610baf5760405192610c1c601f8401601f191660200185610bc5565b82845260208383010111610c3e57816000926020809301838601378301015290565b600080fd5b15610c4a57565b60405162461bcd60e51b815260206004820152601260248201527113db9b1e4818dbdc994818dbdb9d1c9858dd60721b6044820152606490fd5b15610c8b57565b60405162461bcd60e51b8152602060048201526011602482015270159491881b9bdd08199d5b199a5b1b1959607a1b6044820152606490fd5b919082519283825260005b848110610cf0575050826000602080949584010152601f8019910116010190565b602081830181015184830182015201610ccf565b9060148111610d11575090565b60288111610d3e575060648101809111610d285790565b634e487b7160e01b600052601160045260246000fd5b603c10610d535760fa8101809111610d285790565b6101f48101809111610d28579056fea2646970667358221220c01459f3227740ec7173cfb5ee14f900c0d5aaf1d19ad4f2a8cd04cde514541464736f6c63430008140033",
  "linkReferences": {},
  "deployedLinkReferences": {}
}
